/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: Eye Jump
@author:  Sawyer
@description: Platformer
@tags: ["Platformer", "Jumping", "Collecting"]
@addedOn: 2025-11-08
*/

const player1 = "1"
const player2 = "2"
const player3 = "3"
const player4 = "4"

const ground1 = "g"
const ground2 = "h"

const plat = "p"
const plat2 = "o"
const back = "b"
const back2 = "w"

const door1 = "5"
const door2 = "6"
const door3 = "7"
const door4 = "8"

const glass = "c"
const spike = "s"

setLegend(
    [player1, bitmap`
0000............
2220000.........
222222000.......
2222222200......
22222222200.....
222222222200....
2222222222200...
22222222222200..
77777222222220..
777777222222200.
000077722222220.
000007772222220.
0000007722222200
0000007722222220
0000007722222220
0000007722222220` ],
    [player2, bitmap`
............0000
.........0000222
.......000222222
......0022222222
.....00222222222
....002222222222
...0022222222222
..00222222222222
..02222222277777
.002222222777777
.022222227770000
.022222277700000
0022222277000000
0222222277000000
0222222277000000
0222222277000000` ],
    [player3, bitmap`
0222222277000000
0222222277000000
0222222277000000
0022222277000000
.022222277700000
.022222227770000
.002222222777777
..02222222277777
..00222222222222
...0022222222222
....002222222222
.....00222222222
......0022222222
.......000222222
.........0000222
............0000` ],
    [player4, bitmap`
0000007722222220
0000007722222220
0000007722222220
0000007722222200
000007772222220.
000077722222220.
777777222222200.
77777222222220..
22222222222200..
2222222222200...
222222222200....
22222222200.....
2222222200......
222222000.......
2220000.........
0000............` ],

    [ground1, bitmap`
D4D4444444DDD4D4
DDDD4DDDDDD4DDDD
DDCCDCCDCDCDCCDD
DCCCCDDDCCDDCCCD
CCCCCCDDCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCLLLCC
CCCCCCCCCCCCLCCC
CCCLCCCCCCCCCCCC
CCCLCCCCCCCCCCCC
CCCCCCCCLCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC`],
    [ground2, bitmap`
D4D4444DDDDDD4D4
D4DD4DDDDDDD4DDD
D4CCDDCDCDCD4CCD
DCDCCCDDCCDD44CD
CCCCCCCCCCCCD4CC
CCCCCCCCCCCCCCCC
CCCLCCCCCCCCCCCC
CCCLLCCCCCCCLLCC
CCCCCCCCCCCCLLCC
CCCCCCCCCCCCLCCC
CCCCCCCCCCCCCCCC
CCCCLCCCCCCCCCCC
CCCCLLCCCCCCCCCC
CCCCCLCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC`],

    [plat, bitmap`
LLLLLLLLLLLLLLLL
L1L1LLL111LL11LL
L1L1111111LL11LL
L111111LL11111LL
L111111111111LLL
L1111111111111LL
L1111111111111LL
L111111111111LLL
LL11111111111LLL
LL111111111111LL
L1111111111111LL
L1111111111111LL
L1111111111111LL
L1LL111LLL1111LL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL`],
    [plat2, bitmap`
    2222222222222222
    2222221111222222
    2222111111111122
    2111111111111122
    2111111111111112
    2111111111111112
    2111111111111112
    2111111111111122
    2111111111111122
    2211111111111112
    2211111111111112
    2111111111111112
    2221111111111112
    2222211211111222
    2222211211112222
    2222222222222222`],
    [back, bitmap`
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777
    7777777777777777`],
    [back2, bitmap`
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL
    LLLLLLLLLLLLLLLL`],
    [door1, bitmap`
CCCCCCCC........
CCCCCCCCCC......
CCCCCCCCCCCC....
CCCCCCCCCCCCC...
CCCCCCCCCCCCCC..
CCCCCCCCCCCCCCC.
CCCCCCCCCCCCCCC.
CCCCCCCCCCCCCCC.
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC`],
    [door2, bitmap`
........CCCCCCCC
......CCCCCCCCCC
....CCCCCCCCCCCC
...CCCCCCCCCCCCC
..CCCCCCCCCCCCCC
.CCCCCCCCCCCCCCC
.CCCCCCCCCCCCCCC
.CCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC`],
    [door3, bitmap`
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC`],
    [door4, bitmap`
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCLLCCCCCCCC
CCCCCLLLLCCCCCCC
CCCCCCLLLCCCCCCC
CCCCCCCLCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCC`],
    [glass, bitmap`
    ...000......0000
    ..00.0.....00..0
    ..0..0.....0...0
    .00........0....
    .0.........0....
    .0.........0....
    .0000...0000....
    .00000.00000....
    0077700077700...
    0077700077700...
    0077700077700...
    .00000.00000....
    ..000...000.....
    ................
    ................
    ................`],
    [spike, bitmap`
        L..............L
        L..............L
        LL.....L......LL
        LL.....L......LL
        LL....LL......LL
        LL....L1L....L1L
        LLL...L1L....L1L
        L1L...L1L...L11L
        L1L..L11L...L11L
        L1LL.L111L..L11L
        L1LL.L111L.L111L
        L11LLL111L.L111L
        L11LL1111L.L111L
        L111L11111L1111L
        L111LL1111L1111L
        LLLLLLLLLLLLLLLL`]

)
const music = tune`
200: F4/200,
200,
200: C4^200,
200: C5/200,
200,
200: F4/200,
200: C4^200,
200: E5/200,
400,
200: G4/200 + C4^200,
200,
200: F5/200,
200,
200: B4/200 + C4^200,
400,
200: G4/200,
200: C4^200,
200: F5/200 + D4-200 + C4-200,
200: B4/200,
200: C5/200,
200: B4/200 + C4^200,
200: D4-200 + C4-200,
200: F5/200,
200: A4/200,
200: C4^200,
200: D4-200 + C4-200,
200: A5/200,
200,
200: F4/200 + C4^200,
200: D4-200 + C4-200`;
let playback = playTune(music, Infinity)
const GAMEHEIGHT = 16;
const GAMEWIDTH = 20;
let mapData = [[
    "g................................................................", // Level 1 3 coins
    "g................................................................",
    "g................................................................",
    "h................................................................",
    "g................................................................",
    "h................................................................",
    "g................................................................",
    "h................................................................",
    "g................................................................",
    "g................................................................",
    "h................................................................",
    "g............p................p..............pc..................",
    "g...........ppc..............pp.............pp...................",
    "h...........pp...............pp.............pp...................",
    "h............p................p.....p........p...................",
    "g...................................p............................",
    "g.....p..............p.............pp............................",
    "h....pp.............pp.............pp............................",
    "h....pp.............pp..............p............................",
    "g....pp.............pp...........................................",
    "h....pp..............p.......................p...................",
    "h.....p.....................................pp...................",
    "g...........................................pp...................",
    "h............................................p...................",
    "g............p........p..............p...........................",
    "h...........pp.......pp.............pp...........................",
    "g...........pp.......pp.............pp...........................",
    "g............p........p..............p...........................",
    "h................................................................",
    "h.....p..............p........p.............p....................",
    "g....pp.............ppc......pp............pp....................",
    "h....pp.............pp.......pp...........ppp76..................",
    "h....pp.............pp........p...........ppp85..................",
    "g....pp..............p.....................pp....................",
    "h.....p.....................................p....................",
    "g................................................................",
    "h................................................................",
    "g................................................................",
    "h................................................................",
    "g................................................................",
    "h................................................................",
    "g................................................................",
    "h................................................................",
    "g................................................................",
    "h................................................................",
    "g................................................................",
    "h................................................................",
    "g................................................................",
    "h................................................................",
    "g................................................................",
],
[ // Level 2 5 coins
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................o...........................................................o...................................................................................................................................................................",
    ".............................................................................o.........o.................................................o...................................................................................................................................................................",
    ".............................................................................o.........o.................................................o...................................................................................................................................................................",
    ".............................................................................o.........o..............................................oooo.......o...........................................................................................................................................................",
    ".............................................................................o.........oo.........oc..................................o..........o...........................................................................................................................................................",
    ".............................................................................o..........o.........o...................................o..........o...........................................................................................................................................................",
    ".............o................oc.............o...........................ooooo..........o.........o....................o..............o..........o...........................................................................................................................................................",
    "............oos..............oo.............oo...........................o........................o....................os.............o......................................................................................................................................................................",
    "............oo...............oo.............oo........o..................o.............................................o..............o......................................................................................................................................................................",
    ".............o................o.....o........o........o..................o.............................................o.....................................................................................................................................................................................",
    "....................................o.................ooo................o.....................................o...............o.................o...........................................................................................................................................................",
    "......o..............o.............oos.................oo................o.....................................o...............o.................os..........................................................................................................................................................",
    ".....oo.............oo.............oo...................o................o.....................................o...............o.................os..........................................................................................................................................................",
    ".....oo76...........oo..............o....................................o.....................................................oc................o...........................................................................................................................................................",
    ".....oo85...........oo..........................................o................o..........o..................................o.............................................................................................................................................................................",
    ".....oo..............o.......................o.................oo................o..........o..................................o.............................................................................................................................................................................",
    "......o.....................................oo.................oo................o..........o......................................................o........................................................................................................................................................",
    "............................................oo..................o................o..........o.......................o..............................o.........................................................................................................................................................",
    ".............................................o.......................o...o..........................................o..............................o.........................................................................................................................................................",
    ".............o........o..............o........................o......o...o..........................................o..............................o.........................................................................................................................................................",
    "............oos......oo.............oo.......................oo..........o..........................................o..............................oc........................................................................................................................................................",
    "............oos......oo.............oo.............o..........o..........os..................o...............o......o........................................................................................................................................................................................",
    ".............o........o..............o............oo.....................o...................o...............o......o........................................................................................................................................................................................",
    "..................................................oo.....................o...................o.......o.......o...............................................................................................................................................................................................",
    "......o..............o........o.............o......o.....................o...........................o.......o...............................................................................................................................................................................................",
    ".....oo.............oo.......oo............oo............................ooooo........o..............o.......o...............................................................................................................................................................................................",
    ".....oo.............oo.......oo............oo................................o........o..............o.......................................................................................................................................................................................................",
    ".....oo.............oo........o............oos...............................o........o......................................................................................................................................................................................................................",
    ".....oo..............o.....................oo................................o........o......................................................................................................................................................................................................................",
    "......o.....................................o................................o...............................................................................................................................................................................................................................",
    ".............................................................................o...............................................................................................................................................................................................................................",
    ".............................................................................oc..............................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
    ".............................................................................................................................................................................................................................................................................................................",
]];
let ground = "p"
let level = 0
let elevation = 0;
let l = 9;
let score = 0;
function makeMap() {
    let index = 0;
    let results = []; // Array to store all the `b` strings

    for (let row = 0; row < GAMEHEIGHT; row++) {
        let b = ""; // Initialize the string for the current height
        for (let i = 0; i < GAMEWIDTH; i++) {

            if (mapData[level][i + l].charAt(elevation + index) == "c") {
                if (coins.some(coin => coin.l === l + i && coin.elevation === elevation + index)) {
                    b += "."; // Replace with platform if coin has been collected
                } else {
                    b += "c"; // Keep the coin if not collected
                }
            } else {
                b += mapData[level][i + l].charAt(elevation + index);
            }
        }
        results.push(b); // Store the result in the array
        index++;
    }
    let dynLevel = map`
    ${results[15]}
    ${results[14]}
    ${results[13]}
    ${results[12]}
    ${results[11]}
    ${results[10]}
    ${results[9]}
    ${results[8]}
    ${results[7]}
    ${results[6]}
    ${results[5]}
    ${results[4]}
    ${results[3]}
    ${results[2]}
    ${results[1]}
    ${results[0]}`

    let x = getFirst(player1).x
    let y = getFirst(player1).y

    setMap(dynLevel)

    addSprite(x, y, player1)
    addSprite(x - 1, y, player2)
    addSprite(x - 1, y + 1, player3)
    addSprite(x, y + 1, player4)

}
const levels = [
    map`
....................
....................
..pppp.........pppp.
...pp...........pp..
....................
....................
....................
.........21.........
.........34.........
.......pppppp.......
........pppp........
....................
....................
....................
....................
ghhggghghhhgghhhgggh`,
    map`
....................
....................
..pppp.........pppp.
...pp...........pp..
....................
....................
....................
.........21.........
.........34.........
.......pppppp.......
........pppp........
....................
....................
....................
....................
ghhggghghhhgghhhgggh`,
    map`
..........
..........
..........
..........
..........
....21....
....34....
..........`,
    map`
..........
..........
..........
..........
..........
....21....
....34....
..........`
]

setMap(levels[2])

setBackground("b")
setPushables({
    [player1]: [player2, player4]
})

function level2() {
    if (level == 1) {
        level = 0
        setBackground("b")
        ground = "p"
        makeMap()
        l=22
        elevation = 38
        return;
    }
    level = 1
    l = 18;
    elevation = 0;
    setBackground("w")
    ground = "o"
    setMap(levels[1])
    makeMap()
}
let win = false;
let started = false;
addText(`Welcome to`, { x: 5, y: 2, color: color`0` })
addText(`Eye Jump`, { x: 6, y: 4, color: color`0` })
addText(`You need to collect`, { x: 1, y: 6, color: color`0` })
addText(`all the glasses`, { x: 3, y: 7, color: color`0` })
addText(`Press        right`, { x: 1, y: 11, color: color`0` })
addText(`to           start`, { x: 1, y: 13, color: color`0` })

//------- Controls -----------------//
onInput("w", () => {
    if (win || lose || !started) {
        return;
    }
    let a = getFirst(player1)
    let on = getTile(a.x, a.y)
    if (on.length > 1) {
        if (on[1].type == "5") {
            level2();
            makeMap();
            return
        }
    } else {
        jump(4);
        return
    }
})
onInput("a", () => {
    if (win || lose || !started) {
        return;
    }
    Right = false;
    moveLeft();
    makeMap();
})
let inter = setInterval(a, 150)
function a() {
  //do nothing
}
onInput("d", () => {
    if (!started) {
        clearText();
        started = true;
        inter = setInterval(tick, 150)
        level = 0
        elevation = 0
        setMap(levels[0])
        makeMap();
        return
    }
    if (win || lose) {
        return;
    }

    Right = true;
    moveRight();
    makeMap();
})
onInput("j", () => {
    if (win || !started) {
        return;
    }
    let a = getFirst(player1)
    let on = getTile(a.x, a.y)
    if (on.length > 1) {
        if (on[1].type == "5") {
            level2();
            makeMap();
            return
        }
    } else {
        jump(4);
        return
    }
})
//------- Movement functions -------//
let isJumping = false;
let doubleJumped = false;
let onGound = false;
let Right = true;

function checkAbove() {
    let a = getFirst(player1)
    let inWay = getTile(a.x, a.y - 1)
    let inWay2 = getTile(a.x - 1, a.y - 1)
    return (getFirstElementIfNotEmpty(inWay).type == ground || getFirstElementIfNotEmpty(inWay2).type == ground)
}

function checkSide(side) {
    let a = getFirst(player1)
    let inWay;
    let inWay2;
    if (side == "right") {
        inWay = getTile(a.x + 1, a.y)
        inWay2 = getTile(a.x + 1, a.y + 1)
    } else {
        inWay = getTile(a.x - 2, a.y)
        inWay2 = getTile(a.x - 2, a.y + 1)
    }
    return (getFirstElementIfNotEmpty(inWay).type == ground || getFirstElementIfNotEmpty(inWay2).type == ground)
}


function moveUp() {
    if (checkAbove()) {
        return;
    }
    elevation += 1;
    makeMap();
}

function moveLeft() {
    if (checkSide("left")) {
        return;
    }
    l -= 1;
    makeMap();
}

function moveRight() {
    if (checkSide("right")) {
        return;
    }
    l += 1;
    makeMap();
}

function jump(distance) {

    if (!onGound) {
        if (!doubleJumped) {
            doubleJump();
            doubleJumped = true;
        }
        return; // Exit if already jumping
    }
    doubleJumped = false;
    isJumping = true;
    const jumpSound = tune`50: E5/50`;
    playTune(jumpSound);
    setTimeout(function () {
        moveUp()

        setTimeout(function () {
            moveUp()

            setTimeout(function () {
                moveUp()

                setTimeout(function () {
                    moveUp()

                    setTimeout(function () {
                        moveUp()
                        isJumping = false;
                    }, 200);
                }, 40);
            }, 40);
        }, 40);
    }, 40);
}

function doubleJump() {
    let dx = 0;
    if (Right) {
        dx = 1;
    } else {
        dx = -1;
    }
    isJumping = true;
    const jumpSound = tune`50: E5/50`;
    playTune(jumpSound);
    moveUp()
    setTimeout(function () {
        moveUp()
        if (Right) {
            moveRight();
        } else {
            moveLeft();
        }

        setTimeout(function () {
            moveUp()

            setTimeout(function () {
                moveUp()

                setTimeout(function () {
                    moveUp()
                    isJumping = false;
                }, 200);
            }, 40);
        }, 40);
    }, 40);
    makeMap();
}
//------- Utility functions -------//
let lives = 3;
let lose = false;
let coins = [];
function getFirstElementIfNotEmpty(arr) {
    if (arr.length > 0) {
        return arr[0];
    } else {
        return ["p"]; // Or null, or throw an error, depending on desired behavior for empty arrays
    }
}

function tick() {
    if (score == 8 && !win) {
        win = true;
    }
    if (win) {
        setBackground("w")
        clearText();
        addText(`You have collected`, { x: 1, y: 2, color: color`2` })
        addText(`all the glasses!`, { x: 2, y: 4, color: color`2` })
        addText(`You are now`, { x: 5, y: 6, color: color`2` })
        addText(`all powerful!`, { x: 4, y: 7, color: color`2` })
        setMap(levels[2])


        return;
    }
    if (lose) {
        
        
        return;
    }
    let a = getFirst(player3)
    let consty = a.y
    let inWay = getTile(a.x, a.y + 1)
    let inWay2 = getTile(a.x + 1, a.y + 1)
    onGound = (getFirstElementIfNotEmpty(inWay).type == ground || getFirstElementIfNotEmpty(inWay2).type == ground)
    let on = getTile(a.x, a.y)
    if (on.length > 1) {
        if (on[1].type == "c") {
            if (!coins.some(coin => coin.l === l + a.x && coin.elevation === elevation + a.y)) {
                score += 1;
                coins.push({ l: l + a.x, elevation: elevation + a.y });
                if (level == 0) {
                    setTimeout(() => setBackground("w"), 50)
                    setTimeout(() => setBackground("b"), 100)
                } else {
                    setTimeout(() => setBackground("b"), 50)
                    setTimeout(() => setBackground("w"), 100)
                }

            }

        }
        if (on[1].type == "s") {
            lives -= 1;
            jump(5)
            if (Right){
                l -= 2;
            }
            else{
                l +=2;
            }
            if (lives <= 0) {
                setBackground("w")
                clearText();
                addText(`Game Over`, { x: 5, y: 2, color: color`0` })
                addText(`Nice Try`, { x: 5, y: 3, color: color`0` })

                lose = true;
              setMap(levels[2])
              clearInterval(inter); 
                return
            }
        }
    }
    if (!isJumping && getFirstElementIfNotEmpty(inWay).type != ground && getFirstElementIfNotEmpty(inWay2).type != ground) {
        if(elevation == -6){
          clearText();
          addText(`Game Over`, { x: 5, y: 2, color: color`0` })
          addText(`Nice Try`, { x: 5, y: 3, color: color`0` })

          lose = true;
          clearInterval(inter); 
          setMap(levels[2])
          return;
        } 
        elevation -= 1;
        makeMap();
    }
    clearText();
    addText(`${score}`, { x: 1, y: 1, color: color`2` })
    addText("<3".repeat(lives), { x: 1, y: 2, color: color`3` })
}
