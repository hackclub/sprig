let level = 0;
const levels = [map`
wwwwwwwwwwwwwww
w.............w
w.p.....e..g..w
w.............w
wwwwwwwwwwwwwww`];
/*
@title: Adventure Quest
@author: MiniGue
@description: i dunno simple game i guess
@tags: ['dungeon crawler', 'black and white']
@addedOn: 2025-MM-DD
*/
setLegend(
  // Changed "w" to "." here to define the background color
  ["p", bitmap`
0000000000000000
0000111100000000
0001111110000000
0011111111000000
0111111111100000
0111000000100000
0110000000010000
0110000000010000
0111000000100000
0111111111100000
0011111111000000
0001111110000000
0000111100000000
0000011000000000
0000000000000000
0000000000000000`],
  ["e", bitmap`
0000000000000000
0000011110000000
0000111111000000
0001111111100000
0011100001110000
0011000000110000
0010000000010000
0010000000010000
0011000000110000
0011100001110000
0001111111100000
0000111111000000
0000011110000000
0000001100000000
0000000000000000
0000000000000000`],
  ["g", bitmap`
0000000000000000
0000000100000000
0000001110000000
0000011111000000
0000111111100000
0001111111110000
0011111111111000
0111111111111100
0111111111111100
0011111111111000
0001111111110000
0000111111100000
0000011111000000
0000001110000000
0000000100000000
0000000000000000`],
  ["w", bitmap`
1111111111111111
1000000000000001
1000000000000001
1000000000000001
1000000000000001
1000000000000001
1000000000000001
1000000000000001
1000000000000001
1000000000000001
1000000000000001
1000000000000001
1000000000000001
1000000000000001
1111111111111111
0000000000000000`]
);

setMap(levels[level]);

onInput("w", () => getFirst("p").y -= 1);
onInput("s", () => getFirst("p").y += 1);
onInput("a", () => getFirst("p").x -= 1);
onInput("d", () => getFirst("p").x += 1);

afterInput(() => {
  const p = getFirst("p");
  const g = getFirst("g");
  
  if (p && g && p.x === g.x && p.y === g.y) {
    addText(`Win!`, { y: 4 });
  }
  
  // Checking collision with enemy 'e'
  if (tilesWith("p", "e").length > 0) {
    p.x = 2;
    p.y = 2;
    addText(`Hit!`, { y: 4 });
  }
});