/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: Missing cat
@author: KurikoKazumi116
@tags: []
@addedOn: 7/19/2025
@description: Your cat is missing, push your cat to the house to win.
*/

const player = "p"
const cat = "c"
const bg = "b"
const wall = "w"
const house = "h"
const rock = "r"
const bgtune = tune`
337.07865168539325: D4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: C4^337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: C4^337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: E4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: C4^337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: E4~337.07865168539325,
337.07865168539325: E4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: C4^337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: C4^337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: E4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: C4^337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: D4~337.07865168539325,
337.07865168539325: C4^337.07865168539325`
const mew = tune`
338.9830508474576,
169.4915254237288: A4/169.4915254237288,
169.4915254237288: B4/169.4915254237288 + A4-169.4915254237288 + F4~169.4915254237288 + G4^169.4915254237288 + C5/169.4915254237288,
169.4915254237288: A4-169.4915254237288 + F4~169.4915254237288 + B4/169.4915254237288,
169.4915254237288: E4^169.4915254237288 + A4^169.4915254237288,
169.4915254237288: E4/169.4915254237288,
4237.28813559322`
playTune(bgtune, Infinity)
setLegend(
  [ player, bitmap`
................
................
......5555......
.....555555.....
.....505505.....
.....555555.....
.....555555.....
......5555......
......5555......
......5555......
......5555......
......5555......
......5..5......
......5..5......
......5..5......
................` ],
  [ cat, bitmap`
................
................
.....L...L.LLLL.
.....LL.LL.L..L.
.....LLLLL....L.
.....20L02....L.
.....LL8LL...LL.
.....LLLLLLLLLL.
.......LLLLLLL..
......LLLLLLLL..
......LLLLLLLL..
......LLLLLLLL..
......L.L..L.L..
......L.L..L.L..
................
................`],
  [ bg, bitmap`
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444`],
  [ wall, bitmap`
LLLLLLLLLLLLLLLL
L00000000000000L
L0LLLLLLLLLLLL0L
L0L1111111111L0L
L0L1111111111L0L
L0L1111111111L0L
L0L1111111111L0L
L0L1111111111L0L
L0L1111111111L0L
L0L1111111111L0L
L0L1111111111L0L
L0L1111111111L0L
L0L1111111111L0L
L0LLLLLLLLLLLL0L
L00000000000000L
LLLLLLLLLLLLLLLL`],
  [ rock, bitmap`
................
................
................
................
.........LLL....
.....LL1L1101...
....L1111111L...
....11101110L...
....10111111LL..
....LL011111L1..
....L111011011..
......L11L11L...
................
................
................
................`],
  [ house, bitmap`
................
................
.......00.......
......0CC0......
.....0CCCC0.....
....0CCCCCC0....
...0CCCCCCCC0...
..0CC000000CC0..
...000CCCC000...
...0CCCCCCCC0...
...0CCC00CCC0...
...0CCC60CCC0...
...0CCC00CCC0...
....00000000....
................
................`],

)
setSolids([player, wall, rock, cat])

let level = 0
const levels = [
  map`
p.......hw
..w..ww..w
..w..w...w
rwwwrwwrww
.w...w....
.r...w..w.
..ww.c..w.
..r.....w.`
]

setMap(levels[level])

setPushables({
  [ player ]: [rock, cat]
})

onInput("s", () => {
  getFirst(player).y += 1
})
onInput("w", () => {
  getFirst(player).y -= 1
})
onInput("a", () => {
  getFirst(player).x -= 1
})
onInput("d", () => {
  getFirst(player).x += 1
})
onInput("j", () => {
  setMap(levels[level])
})

let previousCatCoordinates = {"x": getFirst(cat).x, "y": getFirst(cat).y}
addText("Click J to reset", {x: 2, y:7, color:color`9`})

  
afterInput(() => {
  clearText();
  if(tilesWith(cat,house).length>= 1){
    addText("You won!", {x: 7, y:7, color:color`9`})
    
  }
let currentCatCoordinates = {"x": getFirst(cat).x, "y": getFirst(cat).y}
if (currentCatCoordinates.x != previousCatCoordinates.x || currentCatCoordinates.y != previousCatCoordinates.y){
  playTune(mew,1)
  previousCatCoordinates = currentCatCoordinates
}
})
